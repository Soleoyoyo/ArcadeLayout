/* Reset & base */
body {
  margin: 0;
  font-family: 'Press Start 2P', monospace;
  background: #1a1a1a;
  color: #fff;
  overflow: auto;
}

header {
  text-align: center;
  padding: 20px 10px 10px;
  background: linear-gradient(270deg, #ff00ff, #00ffff, #ffff00, #ff0000);
  background-size: 800% 800%;
  animation: rainbow 12s ease infinite;
  position: sticky;
  top: 0;
  z-index: 10;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
}

header h1 {
  margin: 0;
  font-size: 2rem;
  text-align: center;
  color: #fff;
  -webkit-text-stroke: 1px black;
  text-shadow: 2px 2px 0 #000,
               -2px 2px 0 #000,
                2px -2px 0 #000,
               -2px -2px 0 #000;
}

#titleLabel {
  font-family: 'Press Start 2P', monospace;
  font-size: 0.8rem;
  color: #fff;
  -webkit-text-stroke: 0.5px black;
  text-shadow: 1px 1px 0 #000,
               -1px 1px 0 #000,
                1px -1px 0 #000,
               -1px -1px 0 #000;
  margin-top: 5px;
}

header input {
  font-family: 'Press Start 2P', monospace;
  font-size: 0.85rem;
  padding: 8px;
  border: none;
  border-radius: 4px;
  width: 280px;
  text-align: center;
}

@keyframes rainbow {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

/* Container: 3-column layout */
#container {
  display: flex;
  height: calc(100vh - 120px);
  overflow: auto;
}

/* Left Sidebar (Cabinet Manager) */
#sidebar-left {
  width: 300px;
  background: #111;
  padding: 20px;
  overflow-y: auto;
  border-right: 3px solid #ff00ff;
  display: flex;
  flex-direction: column;
  gap: 15px;
  box-sizing: border-box;
}

/* Right Sidebar (Room Manager + Import/Export) */
#sidebar-right {
  width: 300px;
  background: #111;
  padding: 20px;
  overflow-y: auto;
  border-left: 3px solid #ff00ff;
  display: flex;
  flex-direction: column;
  gap: 15px;
  box-sizing: border-box;
}

/* Room container (center) */
#roomContainer {
  flex: 1;
  overflow: auto;
  padding: 40px; 
  position: relative;
  box-sizing: border-box;
}

/* Room itself */
#room {
  background: #222;
  position: relative;
  box-sizing: content-box;
  border: 4px solid #00ffff;
  min-width: max-content;
  min-height: max-content;
}

/* Grid lines */
.grid-line {
  position: absolute;
  background: rgba(255, 255, 255, 0.1);
  pointer-events: none;
}

/* Cabinets */
.cabinet {
  position: absolute;
  border: 2px solid #ffcc00;
  cursor: move;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #fff;
  font-weight: bold;
  user-select: none;
  box-sizing: border-box;
  font-size: 0.8rem;
  padding: 6px;
  transition: none; 
  transform-origin: center center;
}

.cabinet.selected { outline: 3px solid #ff00ff; }
.cabinet.locked { cursor: not-allowed; opacity: 0.95; }

/* Simple Mode */
body.simple-mode {
  font-family: Arial, sans-serif;
  background: #e0e0e0;
  color: #000;
}

body.simple-mode header { background: #bbb; animation: none; position: sticky; }
body.simple-mode header h1,
body.simple-mode #titleLabel,
body.simple-mode label,
body.simple-mode #sidebar-left h2,
body.simple-mode #sidebar-right h2 { color: #000; -webkit-text-stroke: 0; text-shadow: none; font-family: Arial, sans-serif; }

body.simple-mode input,
body.simple-mode select,
body.simple-mode textarea,
body.simple-mode button { font-family: Arial, sans-serif; color: #000; background: #fff; border: 2px solid #333; }

body.simple-mode #sidebar-left,
body.simple-mode #sidebar-right { background: #ddd; border-color: #333; }

body.simple-mode #sidebar-left button,
body.simple-mode #sidebar-right button,
body.simple-mode #simpleModeBtn { background: #aaa; color: #000; border: 2px solid #333; }

body.simple-mode #room { border: 3px solid #000; background: #fff; }
body.simple-mode .grid-line { background: #444; }
body.simple-mode .cabinet { border: 2px solid #000; font-family: Arial, sans-serif; font-size: 0.8rem; color: #000; }

/* Simple Mode Button */
#simpleModeBtn {
  position: absolute;
  top: 10px;
  right: 10px;
  font-family: 'Press Start 2P', monospace;
  font-size: 0.65rem;
  padding: 6px 12px;
  border-radius: 4px;
  border: none;
  cursor: pointer;
  background: #ff00ff;
  color: #fff;
  z-index: 20;
  transition: 0.2s all;
}
#simpleModeBtn:hover { background: #ff66ff; }

/* Scrollbars */
#container::-webkit-scrollbar,
#roomContainer::-webkit-scrollbar,
#sidebar-left::-webkit-scrollbar,
#sidebar-right::-webkit-scrollbar { width: 20px; height: 20px; }

#container::-webkit-scrollbar-track,
#roomContainer::-webkit-scrollbar-track,
#sidebar-left::-webkit-scrollbar-track,
#sidebar-right::-webkit-scrollbar-track { background: #222; border-radius: 10px; margin: 4px; }

#container::-webkit-scrollbar-thumb,
#roomContainer::-webkit-scrollbar-thumb,
#sidebar-left::-webkit-scrollbar-thumb,
#sidebar-right::-webkit-scrollbar-thumb { background-color: #ff00ff; border-radius: 10px; border: 4px solid #222; }
#container::-webkit-scrollbar-thumb:hover,
#roomContainer::-webkit-scrollbar-thumb:hover,
#sidebar-left::-webkit-scrollbar-thumb:hover,
#sidebar-right::-webkit-scrollbar-thumb:hover { background-color: #ff66ff; }

/* Firefox scrollbar */
#container, #roomContainer, #sidebar-left, #sidebar-right { scrollbar-width: thin; scrollbar-color: #ff00ff #222; }

/* Smooth transitions */
body, header, #sidebar-left, #sidebar-right, #room, #sidebar-left button, #sidebar-right button, #simpleModeBtn,
input, select, textarea { transition: all 0.5s ease; }

/* Sidebar headings */
#sidebar-left h2, #sidebar-right h2 {
  margin-bottom: 10px;
  font-size: 1rem;
  color: #ffcc00;
  border-bottom: 1px solid #444;
  padding-bottom: 5px;
}

/* Sidebar labels/inputs */
#sidebar-left label, #sidebar-right label, #selectedCabinetUI label {
  display: flex;
  flex-direction: column;
  font-size: 0.8rem;
  margin-bottom: 10px;
}
#sidebar-left input[type="number"],
#sidebar-left input[type="text"],
#sidebar-left input[type="color"],
#sidebar-right input[type="number"],
#sidebar-right input[type="text"],
#sidebar-right input[type="color"],
#selectedCabinetUI input[type="number"],
#selectedCabinetUI input[type="text"],
#selectedCabinetUI input[type="color"] {
  width: 100%; padding: 8px; margin-top: 4px; border-radius: 4px; border: none;
  font-family: 'Press Start 2P', monospace; font-size: 0.85rem; box-sizing: border-box;
}
#sidebar-left input[type="color"], #sidebar-right input[type="color"], #selectedCabinetUI input[type="color"] { height: 40px; padding: 0; }

/* Buttons - base */
#sidebar-left button,
#sidebar-right button,
#selectedCabinetUI button,
#exportLayout,
#importLayout {
  width: 100%;
  padding: 12px;
  font-family: 'Press Start 2P', monospace;
  font-size: 0.85rem;
  border-radius: 6px;
  border: none;
  background: #ff00ff;
  color: #fff;
  cursor: pointer;
  transition: 0.2s all;
  margin-top: 5px;
}
#sidebar-left button:hover,
#sidebar-right button:hover,
#selectedCabinetUI button:hover,
#exportLayout:hover,
#importLayout:hover { background: #ff66ff; }

/* Selected Cabinet container */
#selectedCabinetUI {
  margin-top: 15px; padding: 0; border: none; border-radius: 0; background: transparent; box-shadow: none;
  display: flex; flex-direction: column; gap: 10px;
}

/* HR styling */
#sidebar-left hr, #sidebar-right hr { border: 1px solid #444; margin: 15px 0; }

/* Hide actual file inputs */
#sidebar-right input[type="file"],
#selectedCabinetUI input[type="file"] { display: none; }

body.simple-mode * { font-family: Arial, sans-serif !important; }

/* Cabinet name text */
.cabinet-name {
  font-size: 0.8rem; font-weight: bold; color: #fff; text-align: center;
  padding: 0.5px; width: 100%; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;
  transform-origin: center center; pointer-events: none;
}

/* --- COLOURED ACTION BUTTONS --- */
#selectedCabinetUI #deselectCabinet { background: #ffcc00 !important; color: #000 !important; }
#selectedCabinetUI #deselectCabinet:hover { background: #e6b800 !important; color: #000 !important; }

#selectedCabinetUI #duplicateCabinet { background: #28a745 !important; color: #fff !important; }
#selectedCabinetUI #duplicateCabinet:hover { background: #218838 !important; color: #fff !important; }

#selectedCabinetUI #deleteCabinet { background: #ff4444 !important; color: #fff !important; }
#selectedCabinetUI #deleteCabinet:hover { background: #e03636 !important; color: #fff !important; }

/* Add Cabinet & Update Room GREEN */
#addCabinet, #updateRoom { background: #28a745 !important; color: #fff !important; }
#addCabinet:hover, #updateRoom:hover { background: #218838 !important; }
body.simple-mode #addCabinet, body.simple-mode #updateRoom { background: #28a745 !important; color: #fff !important; border: 2px solid #333 !important; }
body.simple-mode #addCabinet:hover, body.simple-mode #updateRoom:hover { background: #218838 !important; }

/* Toggle buttons (stacked) */
.toggle-row { display: flex; flex-direction: column; gap: 10px; }
#selectedCabinetUI .toggle-row > button { margin-top: 0 !important; width: 100%; padding: 12px; }
#selectedCabinetUI #snapToggleBtn { background: #00aaff !important; color: #fff !important; }
#selectedCabinetUI #snapToggleBtn.off { background: #555 !important; color: #fff !important; }
#selectedCabinetUI #snapToggleBtn:hover { filter: brightness(0.9); }
#selectedCabinetUI #lockToggleBtn { background: #6c6c6c !important; color: #fff !important; }
#selectedCabinetUI #lockToggleBtn.on { background: #e03636 !important; color: #fff !important; }
#selectedCabinetUI #lockToggleBtn:hover { filter: brightness(0.9); }

/* Room Import = Blue, Export = Orange */
#importLayoutBtn { background: #00aaff !important; color: #fff !important; }
#importLayoutBtn:hover { background: #008ed1 !important; }
#exportLayout { background: #ff9800 !important; color: #fff !important; }
#exportLayout:hover { background: #e68900 !important; }
body.simple-mode #importLayoutBtn, body.simple-mode #exportLayout { border: 2px solid #333 !important; }

/* NEW: Cabinet Import/Export match room colours */
#exportCabinetBtn { background: #ff9800 !important; color: #fff !important; }
#exportCabinetBtn:hover { background: #e68900 !important; }
#importCabinetBtn { background: #00aaff !important; color: #fff !important; }
#importCabinetBtn:hover { background: #008ed1 !important; }
body.simple-mode #exportCabinetBtn, body.simple-mode #importCabinetBtn { border: 2px solid #333 !important; }

/* ===== Simple Mode compact spacing (reduced padding) ===== */
body.simple-mode header input { padding: 6px !important; }

body.simple-mode #sidebar-left input[type="number"],
body.simple-mode #sidebar-left input[type="text"],
body.simple-mode #sidebar-left input[type="color"],
body.simple-mode #sidebar-right input[type="number"],
body.simple-mode #sidebar-right input[type="text"],
body.simple-mode #sidebar-right input[type="color"],
body.simple-mode #selectedCabinetUI input[type="number"],
body.simple-mode #selectedCabinetUI input[type="text"],
body.simple-mode #selectedCabinetUI input[type="color"] {
  padding: 6px !important;        /* was 8px */
}

body.simple-mode #sidebar-left button,
body.simple-mode #sidebar-right button,
body.simple-mode #selectedCabinetUI button,
body.simple-mode #exportLayout,
body.simple-mode #importLayout,
body.simple-mode #importLayoutBtn,
body.simple-mode #exportCabinetBtn,
body.simple-mode #importCabinetBtn {
  padding: 10px !important;       /* was 12px */
}

/* Keep toggle buttons visually consistent in Simple Mode */
body.simple-mode #selectedCabinetUI .toggle-row > button {
  padding: 10px !important;
}

/* Reduce cabinet name font size in Arcade Mode (default view) */
body:not(.simple-mode) .cabinet-name {
  font-size: 0.6rem; /* smaller than before */
}

/* Room wall input layout */
.wall-inputs {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px;
}

.wall-inputs label {
  display: flex;
  flex-direction: column;
  font-size: 0.8rem;
}

.wall-inputs input {
  margin-top: 4px;
  padding: 8px;
  border-radius: 4px;
  border: none;
  font-family: 'Press Start 2P', monospace;
  font-size: 0.85rem;
  box-sizing: border-box;
  width: 100%;
}

/* ===================== SAVED ROOMS SECTION ===================== */
.saved-rooms {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin-top: 12px;
  max-height: 450px;         /* Taller view for multiple saves */
  overflow-y: auto;
  background: #111;
  border: 2px solid #ff00ff;
  border-radius: 8px;
  padding: 10px;
  box-shadow: 0 0 10px #ff00ff44;
}

/* Individual saved room entry */
.saved-room-entry {
  background: #1a1a1a;
  border: 2px solid #00ffff;
  padding: 8px 10px;
  border-radius: 6px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 0.75rem;
  color: #fff;
  transition: background 0.2s ease, transform 0.2s ease;
}

.saved-room-entry:hover {
  background: #222;
  transform: translateY(-1px);
}

/* Buttons inside entries */
.saved-room-entry button {
  font-family: 'Press Start 2P', monospace;
  font-size: 0.6rem;
  padding: 5px 8px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  margin-left: 5px;
  transition: 0.2s all;
}

.load-btn {
  background: #28a745;
  color: #fff;
  border: 2px solid #1d7c34;
}
.load-btn:hover { background: #218838; }

.delete-btn {
  background: #ff4444;
  color: #fff;
  border: 2px solid #b53030;
}
.delete-btn:hover { background: #e03636; }

/* Scrollbar styling consistent with theme */
.saved-rooms::-webkit-scrollbar {
  width: 12px;
}
.saved-rooms::-webkit-scrollbar-thumb {
  background: #ff00ff;
  border-radius: 6px;
  border: 3px solid #111;
}
.saved-rooms::-webkit-scrollbar-thumb:hover {
  background: #ff66ff;
}

/* ===================== SIMPLE MODE OVERRIDES ===================== */
body.simple-mode .saved-rooms {
  background: #ddd;
  border: 2px solid #333;
  box-shadow: none;
}

body.simple-mode .saved-room-entry {
  background: #fff;
  border: 2px solid #000;
  color: #000;
}

body.simple-mode .saved-room-entry:hover {
  background: #f2f2f2;
  transform: none;
}

body.simple-mode .saved-room-entry button {
  font-family: Arial, sans-serif;
  font-size: 0.7rem;
  border: 2px solid #333;
}

body.simple-mode .load-btn {
  background: #28a745;
  color: #fff;
}
body.simple-mode .load-btn:hover {
  background: #218838;
}

body.simple-mode .delete-btn {
  background: #ff4444;
  color: #fff;
}
body.simple-mode .delete-btn:hover {
  background: #e03636;
}
